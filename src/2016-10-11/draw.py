__author__ = 'amrit'

import matplotlib.pyplot as plt
import os, pickle
import operator
import numpy as np
import matplotlib.cm as cmx
import matplotlib.colors as colors
#tuned={'SE6': {7: [0.6666666666666666, [0.85345773874862785, 0.84972677595628399, 0.83425414364640893, 0.83833970507919175, 0.86216364634816023, 0.84487534626038774, 0.84750411409764126, 0.84675180455302612, 0.84787350054525623, 0.84983498349834985, 0.8388888888888888, 0.8342450765864331, 0.84574468085106391, 0.84017515051997804, 0.8476454293628809, 0.84347345132743368, 0.845771144278607, 0.82696506550218352, 0.84956709956709953, 0.85170893054024255, 0.83193746510329425, 0.84383561643835614, 0.8431163287086445, 0.82970620239390636, 0.84522502744237105]]}, 'SE3': {7: [0.6666666666666666, [0.57646498332539309, 0.72560596643878184, 0.59645620164711755, 0.72477350827866294, 0.68018406672418774, 0.73445431472081213, 0.67403001982441224, 0.6607991058955015, 0.64658634538152615, 0.69347319347319347, 0.67217317003702648, 0.66234498308906431, 0.59760956175298807, 0.69815195071868574, 0.65174825174825179, 0.7305095150399018, 0.69670916098428703, 0.60405202601300645, 0.67779680365296802, 0.71893399442206374, 0.68658892128279891, 0.64498644986449871, 0.67901234567901225, 0.68084499000856424, 0.59907834101382484]]}, 'SE1': {7: [0.7777777777777778, [0.8961017509084902, 0.89772543958703011, 0.90699208443271773, 0.90305444887118191, 0.89500162284972418, 0.90416803413193303, 0.90146405658825446, 0.90610097023515868, 0.90291583830351219, 0.90310906399078794, 0.90439488356838305, 0.90488771466314399, 0.89965680666775616, 0.90512271454455606, 0.90110070642352558, 0.90394088669950745, 0.90505183478690132, 0.90344714915863411, 0.89599609375, 0.90050894762764722, 0.90071731333550709, 0.9001797091978434, 0.90445650386449594, 0.90560182916870813, 0.90036411784177417]]}, 'SE0': {7: [0.7777777777777778, [0.93750000000000011, 0.92562651576394506, 0.94150641025641046, 0.92712550607287447, 0.91894060995184601, 0.932746196957566, 0.91828478964401294, 0.93900481540930969, 0.94301765650080249, 0.9241323648103309, 0.93145161290322576, 0.92758340113913762, 0.92369477911646569, 0.93525179856115104, 0.93924860111910469, 0.93042071197410992, 0.93446601941747576, 0.9257781324820431, 0.92283214001591107, 0.92457420924574207, 0.93424218123496394, 0.9269662921348315, 0.91885441527446299, 0.92532467532467555, 0.93775262732417153]]}, 'photo': {7: [0.8888888888888888, [0.48887122416534173, 0.52069716775599129, 0.4913294797687861, 0.61788617886178854, 0.59709821428571441, 0.59671805072103434, 0.50064460678985823, 0.52951780081117628, 0.6028368794326241, 0.60210876803551616, 0.4633420171194641, 0.57107231920199508, 0.60430463576158944, 0.48360987454471877, 0.62637362637362626, 0.56009615384615385, 0.54145899410965104, 0.60406370126304221, 0.5, 0.48631578947368415, 0.52304147465437778, 0.61344537815126043, 0.60729847494553368, 0.46566837107377657, 0.61153017241379315]]}, 'SE8': {7: [0.7777777777777778, [0.43410368519675202, 0.35856573705179284, 0.55647155812036275, 0.41099773242630389, 0.48771929824561405, 0.47766323024054985, 0.38704128440366975, 0.46706989247311831, 0.42942942942942947, 0.44494238156209986, 0.35823170731707316, 0.35480624056366378, 0.47043010752688175, 0.49295774647887325, 0.52839116719242896, 0.42007001166861141, 0.37866666666666665, 0.39341517857142866, 0.49890750182083027, 0.54882970137207421, 0.4392106938255888, 0.41966426858513189, 0.28973509933774838, 0.48616039744499645, 0.51291512915129156]]}, 'scifi': {7: [0.7777777777777778, [0.84257975034674071, 0.80457746478873238, 0.83189207886544436, 0.8198136002761478, 0.8401639344262295, 0.83390646492434672, 0.82490408092082312, 0.84641638225255977, 0.81510232886379663, 0.81749049429657805, 0.82986111111111116, 0.84362139917695467, 0.82291666666666663, 0.82470669427191179, 0.81895033462486799, 0.83763329893360849, 0.84252239834596832, 0.81081081081081074, 0.82932692307692324, 0.83131697200138255, 0.82957306490801797, 0.82752613240418127, 0.8241188666205943, 0.81399376515413924, 0.83852005532503449]]}, 'rpg': {7: [0.7777777777777778, [0.42140468227424749, 0.43898263634140372, 0.42896362388469456, 0.43220906857270497, 0.42825848849945231, 0.42997262773722628, 0.42869935079471688, 0.43920480813684692, 0.43493718890732391, 0.42091559991321326, 0.4409584980237154, 0.42480790340285407, 0.4301319981793354, 0.4327030033370412, 0.42635658914728686, 0.43378471425292631, 0.44342137145626365, 0.42202227934875741, 0.43429594806357741, 0.42175239755884919, 0.42123361272297438, 0.43734421028778608, 0.43152396093572565, 0.42616334283000956, 0.4334793636154024]]}, 'cs': {7: [0.6666666666666666, [0.57268722466960353, 0.55463576158940409, 0.5721258134490238, 0.58057514921323927, 0.583288117200217, 0.55249999999999999, 0.57288712422007948, 0.58278867102396514, 0.57135046473482787, 0.57135193133047213, 0.57885906040268453, 0.54640718562874258, 0.57300275482093677, 0.58071390516782095, 0.56830309498399145, 0.49825935596170579, 0.57279909706546273, 0.54076086956521741, 0.55882352941176472, 0.58028169014084507, 0.57629870129870131, 0.55643879173290944, 0.53870292887029292, 0.58463251670378602, 0.57963163596966405]]}, 'diy': {7: [0.7777777777777778, [0.52874067573497152, 0.53306342780026994, 0.52827707145988601, 0.52053486150907347, 0.52231937413713758, 0.51532033426183854, 0.52914798206278024, 0.54484304932735428, 0.51806704397039616, 0.51546391752577314, 0.52485004284490155, 0.53521126760563376, 0.53176470588235303, 0.51996489688459846, 0.52843708016121815, 0.50398992020159594, 0.53671003717472121, 0.52078774617067836, 0.55000000000000004, 0.53755868544600938, 0.52873563218390807, 0.5239520958083832, 0.53462081959491292, 0.50994498518831988, 0.52346570397111924]]}}
#untuned={'SE6': {40: (0.1111111111111111, 0.80398162327718214), 80: (0.1111111111111111, 0.84236186348862419), 10: (0.2222222222222222, 0.51759133964817328), 20: (0.2222222222222222, 0.46676514032496302), 200: (0.1111111111111111, 0.77727529677784069)}, 'SE3': {40: (0.1111111111111111, 0.50411305631723269), 80: (0.1111111111111111, 0.62613902629523555), 10: (0.2222222222222222, 0.1785850568572083), 20: (0.1111111111111111, 0.32262493135639758), 200: (0.1111111111111111, 0.68641830448811969)}, 'SE0': {40: (0.1111111111111111, 0.92874299439551633), 80: (0.2222222222222222, 0.90573770491803285), 10: (0.2222222222222222, 0.93059936908517349), 20: (0.3333333333333333, 0.93461538461538451), 200: (0.2222222222222222, 0.85749792874896436)}, 'photo': {40: (0.2222222222222222, 0.40608341172781431), 80: (0.1111111111111111, 0.41666666666666669), 10: (0.2222222222222222, 0.51647010980073205), 20: (0.1111111111111111, 0.61421850496602193), 200: (0.2222222222222222, 0.41649569142388176)}, 'SE8': {40: (0.2222222222222222, 0.30607685433422699), 80: (0.2222222222222222, 0.35621424856994277), 10: (0.3333333333333333, 0.12853236098450321), 20: (0.2222222222222222, 0.26644615950018374), 200: (0.1111111111111111, 0.56542810985460423)}, 'scifi': {40: (0.2222222222222222, 0.79775631037706451), 80: (0.1111111111111111, 0.8725289706884799), 10: (0.4444444444444444, 0.62699778706663389), 20: (0.3333333333333333, 0.75369738339021619), 200: (0.1111111111111111, 0.86115992970123023)}, 'rpg': {40: (0.1111111111111111, 0.21421770866391623), 80: (0.1111111111111111, 0.23935167734640034), 10: (0.1111111111111111, 0.47355639503507824), 20: (0.1111111111111111, 0.22540983606557377), 200: (0.1111111111111111, 0.23198792908336474)}, 'cs': {40: (0.1111111111111111, 0.28697001034126163), 80: (0.1111111111111111, 0.57906458797327398), 10: (0.2222222222222222, 0.40335151987529222), 20: (0.4444444444444444, 0.24137931034482754), 200: (0.2222222222222222, 0.28933680104031206)}, 'diy': {40: (0.1111111111111111, 0.60411311053984573), 80: (0.1111111111111111, 0.6017897091722596), 10: (0.2222222222222222, 0.4819672131147541), 20: (0.1111111111111111, 0.48838923700700326), 200: (0.1111111111111111, 0.6351706036745407)}}

if __name__ == '__main__':

    fileB = ['SE0' ,'SE6','cs','diy','photo','rpg']
    '''temp1={}
    path = '/Users/amrit/GITHUB/LDAClassification/src/2016-10-11/dump/topics/untuned/'
    for root, dirs, files in os.walk(path, topdown=False):
        for name in files:
            a = os.path.join(root, name)
            with open(a, 'rb') as handle:
                temp = pickle.load(handle)
                temp1 = dict(temp1.items() + temp.items())
    print(temp1)'''
    tuned={'SE6': {7: [0.6666666666666666, [0.85345773874862785, 0.84972677595628399, 0.83425414364640893, 0.83833970507919175, 0.86216364634816023, 0.84487534626038774, 0.84750411409764126, 0.84675180455302612, 0.84787350054525623, 0.84983498349834985, 0.8388888888888888, 0.8342450765864331, 0.84574468085106391, 0.84017515051997804, 0.8476454293628809, 0.84347345132743368, 0.845771144278607, 0.82696506550218352, 0.84956709956709953, 0.85170893054024255, 0.83193746510329425, 0.84383561643835614, 0.8431163287086445, 0.82970620239390636, 0.84522502744237105]]}, 'SE3': {7: [0.6666666666666666, [0.57646498332539309, 0.72560596643878184, 0.59645620164711755, 0.72477350827866294, 0.68018406672418774, 0.73445431472081213, 0.67403001982441224, 0.6607991058955015, 0.64658634538152615, 0.69347319347319347, 0.67217317003702648, 0.66234498308906431, 0.59760956175298807, 0.69815195071868574, 0.65174825174825179, 0.7305095150399018, 0.69670916098428703, 0.60405202601300645, 0.67779680365296802, 0.71893399442206374, 0.68658892128279891, 0.64498644986449871, 0.67901234567901225, 0.68084499000856424, 0.59907834101382484]]}, 'SE1': {7: [0.7777777777777778, [0.8961017509084902, 0.89772543958703011, 0.90699208443271773, 0.90305444887118191, 0.89500162284972418, 0.90416803413193303, 0.90146405658825446, 0.90610097023515868, 0.90291583830351219, 0.90310906399078794, 0.90439488356838305, 0.90488771466314399, 0.89965680666775616, 0.90512271454455606, 0.90110070642352558, 0.90394088669950745, 0.90505183478690132, 0.90344714915863411, 0.89599609375, 0.90050894762764722, 0.90071731333550709, 0.9001797091978434, 0.90445650386449594, 0.90560182916870813, 0.90036411784177417]]}, 'SE0': {7: [0.7777777777777778, [0.93750000000000011, 0.92562651576394506, 0.94150641025641046, 0.92712550607287447, 0.91894060995184601, 0.932746196957566, 0.91828478964401294, 0.93900481540930969, 0.94301765650080249, 0.9241323648103309, 0.93145161290322576, 0.92758340113913762, 0.92369477911646569, 0.93525179856115104, 0.93924860111910469, 0.93042071197410992, 0.93446601941747576, 0.9257781324820431, 0.92283214001591107, 0.92457420924574207, 0.93424218123496394, 0.9269662921348315, 0.91885441527446299, 0.92532467532467555, 0.93775262732417153]]}, 'photo': {7: [0.8888888888888888, [0.48887122416534173, 0.52069716775599129, 0.4913294797687861, 0.61788617886178854, 0.59709821428571441, 0.59671805072103434, 0.50064460678985823, 0.52951780081117628, 0.6028368794326241, 0.60210876803551616, 0.4633420171194641, 0.57107231920199508, 0.60430463576158944, 0.48360987454471877, 0.62637362637362626, 0.56009615384615385, 0.54145899410965104, 0.60406370126304221, 0.5, 0.48631578947368415, 0.52304147465437778, 0.61344537815126043, 0.60729847494553368, 0.46566837107377657, 0.61153017241379315]]}, 'SE8': {7: [0.7777777777777778, [0.43410368519675202, 0.35856573705179284, 0.55647155812036275, 0.41099773242630389, 0.48771929824561405, 0.47766323024054985, 0.38704128440366975, 0.46706989247311831, 0.42942942942942947, 0.44494238156209986, 0.35823170731707316, 0.35480624056366378, 0.47043010752688175, 0.49295774647887325, 0.52839116719242896, 0.42007001166861141, 0.37866666666666665, 0.39341517857142866, 0.49890750182083027, 0.54882970137207421, 0.4392106938255888, 0.41966426858513189, 0.28973509933774838, 0.48616039744499645, 0.51291512915129156]]}, 'scifi': {7: [0.7777777777777778, [0.84257975034674071, 0.80457746478873238, 0.83189207886544436, 0.8198136002761478, 0.8401639344262295, 0.83390646492434672, 0.82490408092082312, 0.84641638225255977, 0.81510232886379663, 0.81749049429657805, 0.82986111111111116, 0.84362139917695467, 0.82291666666666663, 0.82470669427191179, 0.81895033462486799, 0.83763329893360849, 0.84252239834596832, 0.81081081081081074, 0.82932692307692324, 0.83131697200138255, 0.82957306490801797, 0.82752613240418127, 0.8241188666205943, 0.81399376515413924, 0.83852005532503449]]}, 'rpg': {7: [0.7777777777777778, [0.42140468227424749, 0.43898263634140372, 0.42896362388469456, 0.43220906857270497, 0.42825848849945231, 0.42997262773722628, 0.42869935079471688, 0.43920480813684692, 0.43493718890732391, 0.42091559991321326, 0.4409584980237154, 0.42480790340285407, 0.4301319981793354, 0.4327030033370412, 0.42635658914728686, 0.43378471425292631, 0.44342137145626365, 0.42202227934875741, 0.43429594806357741, 0.42175239755884919, 0.42123361272297438, 0.43734421028778608, 0.43152396093572565, 0.42616334283000956, 0.4334793636154024]]}, 'cs': {7: [0.6666666666666666, [0.57268722466960353, 0.55463576158940409, 0.5721258134490238, 0.58057514921323927, 0.583288117200217, 0.55249999999999999, 0.57288712422007948, 0.58278867102396514, 0.57135046473482787, 0.57135193133047213, 0.57885906040268453, 0.54640718562874258, 0.57300275482093677, 0.58071390516782095, 0.56830309498399145, 0.49825935596170579, 0.57279909706546273, 0.54076086956521741, 0.55882352941176472, 0.58028169014084507, 0.57629870129870131, 0.55643879173290944, 0.53870292887029292, 0.58463251670378602, 0.57963163596966405]]}, 'diy': {7: [0.7777777777777778, [0.52874067573497152, 0.53306342780026994, 0.52827707145988601, 0.52053486150907347, 0.52231937413713758, 0.51532033426183854, 0.52914798206278024, 0.54484304932735428, 0.51806704397039616, 0.51546391752577314, 0.52485004284490155, 0.53521126760563376, 0.53176470588235303, 0.51996489688459846, 0.52843708016121815, 0.50398992020159594, 0.53671003717472121, 0.52078774617067836, 0.55000000000000004, 0.53755868544600938, 0.52873563218390807, 0.5239520958083832, 0.53462081959491292, 0.50994498518831988, 0.52346570397111924]]}}
    untuned={'SE6': {40: (0.1111111111111111, 0.80398162327718214), 80: (0.1111111111111111, 0.84236186348862419), 10: (0.2222222222222222, 0.51759133964817328), 20: (0.2222222222222222, 0.46676514032496302), 200: (0.1111111111111111, 0.77727529677784069)}, 'SE3': {40: (0.1111111111111111, 0.50411305631723269), 80: (0.1111111111111111, 0.62613902629523555), 10: (0.2222222222222222, 0.1785850568572083), 20: (0.1111111111111111, 0.32262493135639758), 200: (0.1111111111111111, 0.68641830448811969)}, 'SE0': {40: (0.1111111111111111, 0.92874299439551633), 80: (0.2222222222222222, 0.90573770491803285), 10: (0.2222222222222222, 0.93059936908517349), 20: (0.3333333333333333, 0.93461538461538451), 200: (0.2222222222222222, 0.85749792874896436)}, 'photo': {40: (0.2222222222222222, 0.40608341172781431), 80: (0.1111111111111111, 0.41666666666666669), 10: (0.2222222222222222, 0.51647010980073205), 20: (0.1111111111111111, 0.61421850496602193), 200: (0.2222222222222222, 0.41649569142388176)}, 'SE8': {40: (0.2222222222222222, 0.30607685433422699), 80: (0.2222222222222222, 0.35621424856994277), 10: (0.3333333333333333, 0.12853236098450321), 20: (0.2222222222222222, 0.26644615950018374), 200: (0.1111111111111111, 0.56542810985460423)}, 'scifi': {40: (0.2222222222222222, 0.79775631037706451), 80: (0.1111111111111111, 0.8725289706884799), 10: (0.4444444444444444, 0.62699778706663389), 20: (0.3333333333333333, 0.75369738339021619), 200: (0.1111111111111111, 0.86115992970123023)}, 'rpg': {40: (0.1111111111111111, 0.21421770866391623), 80: (0.1111111111111111, 0.23935167734640034), 10: (0.1111111111111111, 0.47355639503507824), 20: (0.1111111111111111, 0.22540983606557377), 200: (0.1111111111111111, 0.23198792908336474)}, 'cs': {40: (0.1111111111111111, 0.28697001034126163), 80: (0.1111111111111111, 0.57906458797327398), 10: (0.2222222222222222, 0.40335151987529222), 20: (0.4444444444444444, 0.24137931034482754), 200: (0.2222222222222222, 0.28933680104031206)}, 'diy': {40: (0.1111111111111111, 0.60411311053984573), 80: (0.1111111111111111, 0.6017897091722596), 10: (0.2222222222222222, 0.4819672131147541), 20: (0.1111111111111111, 0.48838923700700326), 200: (0.1111111111111111, 0.6351706036745407)}}



    font = {
        'size': 60}

    plt.rc('font', **font)
    paras = {'lines.linewidth': 10, 'legend.fontsize': 35, 'axes.labelsize': 60, 'legend.frameon': False,
             'figure.autolayout': True}
    plt.rcParams.update(paras)
    X = range(len(fileB))
    plt.figure(num=0, figsize=(25, 15))


    Y_tuned_raw = []
    Y_tuned_iqr = []
    Y_tuned_f=[]
    Y_untuned_raw = []

    Y_untuned_f = []
    for file1 in fileB:
        Y_tuned_raw.append(tuned[file1][7][0])
        Y_tuned_iqr.append(np.percentile(tuned[file1][7][1],75)-np.percentile(tuned[file1][7][1],25))
        Y_tuned_f.append(np.median(tuned[file1][7][1]))
        Y_untuned_raw.append(untuned[file1][10][0])
        Y_untuned_f.append(untuned[file1][10][1])
    Y_untuned_raw=[0.44, 0.44, 0.33, 0.2222, 0.22, 0.33]
    Y_untuned_f=[0.7905993690851735, 0.5175913396481733, 0.3733515198752922, 0.3819672131147541, 0.426470109800732, 0.33355639503507824]
    Y_untuned_iqr=[0.020677589315408964, 0.019846116563674361, 0.013192844236754606, 0.002528566291196475, 0.13406370126304221, 0.0181326052335678467]

    line,=plt.plot(X, Y_tuned_raw, marker='o', markersize=20, label='tuned raw score')
    plt.plot(X, Y_untuned_raw,linestyle="-.", marker='*',markersize=25,color=line.get_color(),label='untuned raw score')
    line, = plt.plot(X, Y_tuned_f, marker='o', markersize=20, label='tuned f2 score')
    plt.plot(X, Y_untuned_f, linestyle="-.", marker='*',markersize=25, color=line.get_color(), label='untuned f2 score')
    line, = plt.plot(X, Y_tuned_iqr, marker='o', markersize=20, label='tuned iqr score')
    plt.plot(X, Y_untuned_iqr, linestyle="-.", marker='*',markersize=25, color=line.get_color(), label='untuned iqr score')
        #plt.ytext(0.04, 0.5, va='center', rotation='vertical', fontsize=11)
        #plt.text(0.04, 0.5,"Rn (Raw Score)", labelpad=100)
    plt.ylim(0.0, 1.0)
    plt.xticks(X, fileB)
    plt.ylabel("Scores", labelpad=30)
    plt.xlabel("Datasets", labelpad=30)
    plt.legend(bbox_to_anchor=(1.00, 1.13), loc=1, ncol=3, borderaxespad=0.1)
    plt.savefig("raw_vs_f.png")
